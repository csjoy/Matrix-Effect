<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Matrix Effect</title>
  <style>
    #canvas {
      position: fixed;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <div><canvas id="canvas"></canvas></div>
  <script>
    const hiragana = [
      'あ', 'い', 'う', 'え', 'お',
      'か', 'き', 'く', 'け', 'こ',
      'さ', 'し', 'す', 'せ', 'そ',
      'た', 'ち', 'つ', 'て', 'と',
      'な', 'に', 'ぬ', 'ね', 'の',
      'は', 'ひ', 'ふ', 'へ', 'ほ',
      'ま', 'み', 'む', 'め', 'も',
      'や', 'ゆ', 'よ',
      'ら', 'り', 'る', 'れ', 'ろ',
      'わ', 'ゐ', 'ゑ', 'を',
      'ん',
      'が', 'ぎ', 'ぐ', 'げ', 'ご',
      'ざ', 'じ', 'ず', 'ぜ', 'ぞ',
      'だ', 'ぢ', 'づ', 'で', 'ど',
      'ば', 'び', 'ぶ', 'べ', 'ぼ',
      'ぱ', 'ぴ', 'ぷ', 'ぺ', 'ぽ',

      'ぁ', 'ぃ', 'ぅ', 'ぇ', 'ぉ'
    ];
    const katakana = [
      'ア', 'イ', 'ウ', 'エ', 'オ',
      'カ', 'キ', 'ク', 'ケ', 'コ',
      'サ', 'シ', 'ス', 'セ', 'ソ',
      'タ', 'チ', 'ツ', 'テ', 'ト',
      'ナ', 'ニ', 'ヌ', 'ネ', 'ノ',
      'ハ', 'ヒ', 'フ', 'ヘ', 'ホ',
      'マ', 'ミ', 'ム', 'メ', 'モ',
      'ヤ', 'ユ', 'ヨ',
      'ラ', 'リ', 'ル', 'レ', 'ロ',
      'ワ', 'ヰ', 'ヱ', 'ヲ',
      'ン',
      'ガ', 'ギ', 'グ', 'ゲ', 'ゴ',
      'ザ', 'ジ', 'ズ', 'ゼ', 'ゾ',
      'ダ', 'ヂ', 'ヅ', 'デ', 'ド',
      'バ', 'ビ', 'ブ', 'ベ', 'ボ',
      'パ', 'ピ', 'プ', 'ペ', 'ポ',

      'ァ', 'ィ', 'ゥ', 'ェ', 'ォ',
      'ー'
    ];

    const canvas = document.querySelector("#canvas")
    const ctx = canvas.getContext("2d");
    canvas.width = innerWidth;
    canvas.height = innerHeight;
    ctx.font = "24px Arial";
    const colVal = [];
    for (let x = 0; x < 80; x++) {
      colVal.push(0);
    }
    setInterval(matrix, 48);

    function matrix() {
      ctx.fillStyle = "rgba(0,0,0,.08)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "green";
      colVal.map((posY, index) => {
        let hIndex = Math.floor(Math.random() * hiragana.length);
        let kIndex = Math.floor(Math.random() * katakana.length);
        let output = Math.random() < 0.5 ? hiragana[hIndex] : katakana[kIndex];
        let posX = index * 24;
        ctx.fillText(output, posX, posY);
        if (posY > 400 + Math.random() * 400) {
          colVal[index] = 0;
        } else {
          colVal[index] = posY + 24;
        }
      });
    }
  </script>
</body>

</html>